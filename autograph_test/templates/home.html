{% extends 'base.html' %}
{% block title %}Autograph with jQuery UI Signature{% endblock title %}

{% block header_css %}
    <link type="text/css" href="{{ STATIC_URL }}css/jquery.signature.css" rel="stylesheet">
    <style type="text/css">
    .kbw-signature, .json_string { width: 400px; height: 200px; }
    </style>
{% endblock header_css %}

{% block content %}
    <h1>jQuery UI Signature Basics</h1>
    <p>This page demonstrates the very basics of the
	<a href="http://keith-wood.name/signature.html">jQuery UI Signature plugin</a>.
	It contains the minimum requirements for using the plugin and
	can be used as the basis for your own experimentation.</p>
    <p>For more detail see the <a href="http://keith-wood.name/signatureRef.html">documentation reference</a> page.</p>
    {% if signature %}
        <p>Latest signature:</p>
        <p><img src="{{ MEDIA_URL }}{{ image_name }}" /></p>
        <label><textarea id="json_source" class="json_string" readonly="readonly">{{ signature.signature }}</textarea></label>
        <p><button id="redraw">Redraw</button></p>
    {% endif %}
    <p>Draw signature:</p>
    <div id="sig"></div>
    <p style="clear: both;">
        <button id="clear">Clear</button>
        <button id="json">To JSON</button>
    </p>
    <form method="POST">
        {% csrf_token %}
        <label><textarea id="json_string" class="json_string" name="json_string" readonly="readonly"></textarea></label>
        <div><input type="submit" name="submit" /></div>
    </form>
{% endblock content %}

{% block bottom_javascript %}
    <!--[if IE]>
        <script type="text/javascript" src="{{ STATIC_URL }}js/excanvas.js"></script>
    <![endif]-->
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.signature.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#sig').signature();
            $('#clear').on('click', function(){
                $('#sig').signature('clear');
            });
            $('#json').on('click', function(){
                $('#json_string').text($('#sig').signature('toJSON'));
            });
            $('#redraw').on('click', function(){
                $('#sig').signature('draw', $('#json_source').text());
            });
            $('form:first').on('submit', function(){
                if(!$('#sig').signature('isEmpty')){
                    $('#json').click();
                    return true;
                }else{
                    alert('Empty Signature');
                }
                return false;
            });
        });
    </script>
{% endblock bottom_javascript %}